<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>MMT</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="dataTables.bootstrap.css">

    <link rel="stylesheet" href="jquery.treetable.css" />
    <link rel="stylesheet" href="jquery.treetable.theme.default.css" />

    <script type="text/javascript" language="javascript" src="jquery.js"></script>
    <script type="text/javascript" language="javascript" src="bootstrap.min.js"></script>
    <script type="text/javascript" language="javascript" src="jquery.dataTables.min.js"></script>
    <script type="text/javascript" language="javascript" src="dataTables.bootstrap.js"></script>
    <script type="text/javascript" language="javascript" src="treetable.js"></script>
    <script type="text/javascript" src="highcharts.js"></script>
    <script type="text/javascript" src="highcharts-more.js"></script>
    <script type="text/javascript" src="solid-gauge.src.js"></script>
    <script type="text/javascript" src="funnel.js"></script>
    <script type="text/javascript" src="mmt_drop.js"></script>

    <style>
        table.treetable {
            margin: 0;
            font-size: .95em;
        }
        table.treetable thead {
          font-size: 1.1em;
          font-weight: bold;
        }
        tr.selected a {
          color: #fff;
        }
    </style>
</head>

<body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">MMT Cloud</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="dash.html">Dashboard</a></li>
            <li><a href="hierarchy.html">Hierarchy</a></li>
            <li><a href="categories.html">Categories</a></li>
            <li><a href="apps.html">Applications</a></li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12 col-md-12 main">
            <div id="treport" class="content"></div>
        </div>
      </div>
    </div>
    
    <script>
		var chartsElemMap = {};
		var gstats;
                var gstats;
Highcharts.setOptions({
                global: {
                    useUTC: false
                }
            });        		
        function initCharts(tstats) {
            for(i in tstats ) console.log(i);
            gstats = new MMTDrop.GlobalStats();
            gstats.meta = tstats["metadata"];
            values = tstats.data;
            console.log(tstats.data);
            for (i in values) {
                if (values[i][MMTDrop.StatsColumnId.FORMAT_ID] == MMTDrop.CsvFormat.STATS_FORMAT) {
                    gstats.processEntry(values[i]);
                }
            }	

            var toverviewReport = MMTDrop.ReportFactory.createTrafficOverviewReport("treport", gstats);

            chartsElemMap["tview"] = [{"chart": toverviewReport}];
            
            toverviewReport.render();
        }

	</script>
    <script type="text/javascript" src="/traffic/data?period=1h&callback=initCharts"></script>

</body>
</html>
